@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = "Portfolio Manager";
}

<h4 class="py-3 mb-4">
    <span class="text-muted fw-light">@Localizer["Portfolio Manager"] /</span> @Localizer["Portfolios"]
</h4>


@Html.Partial("_PortfolioCards")

<div class="col-12">
    <h6 class="text-muted">Investment Analisys</h6>
    <div class="nav-align-top mb-4">
        <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
            <li class="nav-item" role="presentation">
                <button type="button" class="nav-link active" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-home" aria-controls="navs-pills-justified-home" aria-selected="true">
                  <i class="tf-icons bx bx-wallet me-1"></i><span class="d-none d-sm-block"> Portfolios</span>
                  <span id="portfolios-numbers" class="badge rounded-pill badge-center h-px-20 w-px-20 bg-danger ms-1">3</span></button>
            </li>
            <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-profile" aria-controls="navs-pills-justified-profile" aria-selected="false" tabindex="-1">
                  <i class="tf-icons bx bx-chart me-1"></i><span class="d-none d-sm-block"> P/L Heat Map</span></button>
            </li>
            <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-messages" aria-controls="navs-pills-justified-messages" aria-selected="false" tabindex="-1">
                  <i class="tf-icons bx bx-cube-alt me-1">

                </i>
                <span class="d-none d-sm-block"> Analisys</span></button>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade active show" id="navs-pills-justified-home" role="tabpanel">
                <div class="row">
                    <div class="col-md-12">
                        <div >
                            <div>
                                <!-- Loading Spinner -->
                                <div id="loadingSpinner" class="text-center">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                                <!-- Portfolio List -->
                                <div id="portfolioList" style="display: none;">
                                    <!-- Portfolio list will be rendered here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="tab-pane fade" id="navs-pills-justified-profile" role="tabpanel">
               <div>
                    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
                    <div id="heatmapContainer"></div>
                    <div id="portfolios-numbers"></div>
                </div>
            </div>
            <div class="tab-pane fade" id="navs-pills-justified-messages" role="tabpanel">
                @Html.Partial("_TreeMap")
            </div>
        </div>
    </div>
</div>




@Html.Partial("_AddPortfolioModal")
@Html.Partial("_EditPortfolioModal")
@Html.Partial("_AddPortfolioItemModal")
@Html.Partial("_EditPortfolioItemModal")

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
@section PageScripts {
    <script src="~/js/pages/portfolio/portfolio.js"></script>
    <script src="~/js/pages/portfolio/importexportportfolio.js"></script>
    <script src="~/js/pages/portfolio/editportfolio.js"></script>
    <script src="~/js/pages/portfolio/editportfolioitem.js"></script>
    <script src="~/js/pages/portfolio/renderportfolioheatmaps.js"></script>
    <script src="~/js/pages/portfolio/statsportfolio.js"></script>
    <script src="~/js/pages/portfolio/treemap.js"></script>
    <script src="~/js/pages/portfolio/utilsportfolio.js"></script>
    <script src="~/js/pages/portfolio/chartsportfolio.js"></script>

}
